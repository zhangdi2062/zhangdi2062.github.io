---
title: 大屏编辑器
date: 2024-02-26 15:03:04
tags:
- js
- vue
- 编辑器
categories:
- 大屏
---

### 蓝图实现

关键词：canvas

### 适配方案

| 方案 | 实现方式 | 优点 | 缺点 |
|:------|:-----:|------:|------:|
| 固定尺寸 |超出部分overflow|简单，适合固定分辨率的设备|不适用于多种分辨率|
| vh、vw | 将px按比例转成vw和vh | 1. 可以动态计算图表的宽高、字体等，灵活性高；2. 当屏幕比例跟ui稿不一致时，不会出现两边留白情况 |需要编写公共转换函数，为每个图表单独做字体、间距、位移的适配，比较麻烦 |
| scale | 通过scale属性根据屏幕大小进行整体的等比缩放 | 1. 代码量少，适配简单 2. 一次处理后不需要各个图表再单独适配 |1. 当屏幕比和ui比例不一致时，会出现周边留白情况 2. 当缩放比例过大时，字体和图片会有一点点失真 3. 当缩放比例过大时，事件热区会偏移 |
| rem + vw vh | 1. 获得rem的基准值 2. 动态计算html根元素的font-size 3. 图表通过vw vh动态计算字体、间距、位移等 | 布局的自适应代码量少，适配简单 | 1. 当屏幕比和ui比例不一致时，会出现周边留白情况 2.图表单独做字体、间距、位移的适配  |

### 碎碎念

1. 监听/取消监听写在一块，返回函数的形式取消监听

```js
export default {
  created() {
    document.addEventListener('mouseenter', this.mouseenter)
    this.events = this.initEvent()
  },
  beforeDestroy() {
    document.removeEventListener('mouseenter', this.mouseenter)
    this.events && this.events()
  },
  methods: {
    mouseenter(e) {
      this.$bus.$emit('mouseenter', e)
    },
    // 初始化事件
    initEvent() {
      // 信息
      function message(type, msg) {
        msg && this.$message[type || 'info'](msg)
      }

      this.$bus.$on('message', message)

      return function () {
        this.$bus.$off('message', message)
      }
    },
  },
}
```