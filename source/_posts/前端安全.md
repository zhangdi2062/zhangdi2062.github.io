---
title: 前端安全
tags:
  - 安全漏洞
categories:
  - 前端
date: 2024-07-02 11:40:48
---

# XSS

## XSS攻击

### 反射型XSS

需要访问精心设计的url才能实施攻击，例如`http://abc.com?a=<script>alert(1)</script>`

### 存储型XSS

评论区、留言板、邮件等一些输入框输入漏洞代码，会存储到数据库中，一旦用户访问网页，即被攻击

### DOM型XSS

直接在客户端攻击，不会发起http请求或存储到数据库中，例如`document.write`、`location`、`innerHTML`、`eval`等

## XSS预防

### 输入过滤

在Web应用程序中对用户输入的数据进行过滤和校验，确保只接收合法的数据

- 输入验证：严格验证所有用户输入的数据，确保它们符合预期格式。使用白名单策略，只允许合法的输入通过。
- 输入过滤：对所有输入的数据进行过滤，移除或编码特殊字符，防止恶意脚本注入。例如，过滤或转义 <, >, &, " 等特殊字符。

### 输出转义

在向Web页面中输出用户数据时，对其内容进行适当的编码和转义处理

- HTML 编码：对用户输入的数据在输出到 HTML 内容中时进行编码，将特殊字符转换为 HTML 实体。例如，将 < 编码为 &lt;，> 编码为 &gt;。
- JavaScript 编码：对用户输入的数据在输出到 JavaScript 内容中时进行编码，将特殊字符转换为安全的字符表示。
- URL 编码：对用户输入的数据在输出到 URL 参数中时进行编码，将特殊字符转换为 URL 编码表示。
- CSS 编码：对用户输入的数据在输出到 CSS 内容中时进行编码，防止恶意代码注入。

### CSP（Content Security Policy）

通过设置响应报文头中的CSP策略，限制页面中可执行的脚本来源、样式表、图像、字体等，以此减少恶意代码执行的可能性

- 防止XSS攻击：通过禁止外部脚本（例如第三方广告、恶意脚本等）执行，防止XSS攻击；
- 防止数据泄露：通过禁止外部资源加载，防止敏感数据被窃取或篡改；
- 防止点击劫持：通过禁止页面嵌入式IFRAME，防止被钓鱼网站所利用；